---
name: ModelDetail (模型详情)
menu: AutoML
order: 70
---

import { Playground, PropsTable } from 'docz';
import { State, Toggle } from 'react-powerplug'
import Demo from './example'
import { LocaleProviderHoc } from '../../utils/hoc.js';
import data from "./mock";
import { AutoML, Components } from '../../index.tsx';
const { ModelDetails } = AutoML;
const { ModelDetail } = ModelDetails;

# ModelDetail (模型详情)



引入组件

```
import { AutoML } from 'zet-component';
```

## 例子


## Basic Detail
<Playground>
 <State>
 {({state, setState }) => {
  const { ModelDetails } = AutoML;
  const { ModelDetail } = ModelDetails;
  return (<div style={{ height: 300 }}>
   <ModelDetail
      links={[
        {id: 'id1', title: '概述', type: 'RowCol', data: data.rowCol },
        {id: 'id2', title: 'PipeLine', type: 'PipeLine', data: JSON.parse(data.pipeline) },
        {id: 'id3', title: '评估报告', type: 'Report',
          data: {
            plotChart: data.plotChartData,
            arithmetic: data.arithmetic,
            train: data.train,
            thresholdChart1: { data: JSON.parse(data.sliderData), metricName: 'aaa'},
            featureImportance: data.featureImportance,
            modelPerformance: JSON.parse(data.modelPerformance),
          },
        },
        {id: 'id4', title: '模型对比', type: 'Compare',
          data: {
            charts: {
               compareCharts: JSON.parse(data.compareCharts),
               compareChartsType: JSON.parse(data.compareChartsType),
               compareChartsModels: JSON.parse(data.compareChartsModels),
               compareChartsModels1: JSON.parse(data.compareChartsModels1),
               currentJob: data.currentJob,
            },
            tables: {
              dataCompare: JSON.parse(data.dataCompare),
              currentJob: data.currentJob,
            }
            }
          },
          {id: 'id3', title: '附件', type: 'Attachments', data: data.attachments },
        ]}
     />
    </div>)
    }}
  </State>
</Playground>

## RowCol
<Playground>
 <State>
 {({state, setState }) => {
    const { ModelDetails } = AutoML;
    const { RowCol } = ModelDetails;
    const rowcol =  [
                        [
                          {key: 'acc', value: 0.9},
                          {key: '名字', value: [12345678901234567890, 0.1]},
                          {key: 'aa', value: ['lili', 0.12345678901234567890]},
                          {key: 'a', value: 1},
                        ],
                        [{key: '__title__', value: '概述'}, {key: 'a', value: 1},{key: 'a', value: 1}],
                        [{key: '__title__', value: '概述'}, {key: 'a', value: 1},{key: 'a', value: 1}],
                      ]
    return <RowCol id='overview' title='overview' data={rowcol} />
 }}
  </State>
</Playground>

## PipeLine
<Playground>
  <State>
    {({ state, setState }) => {
      const { ModelDetails } = AutoML;
      const { PipeLine } = ModelDetails;
      const pipeline = '[{"modelId":null,"name":"Pipeline初始化","description":"Empty","orderId":0,"stepTransformer":[]},{"modelId":null,"name":"缺失值填充_连续型","description":"Empty","orderId":1,"stepTransformer":[{"stepId":"56f293d7-a24e-4775-8afd-653c3e7e814d","name":"datacanvas.api.dc_sklearn.features.Imputer","features":{"x1":"float64","x2":"float64","x3":"float64"},"transformer":"{\\"native_transformer\\": null, \\"type\\": \\"sklearn_dc\\", \\"schema\\": {\\"x1\\": \\"float64\\", \\"x2\\": \\"float64\\", \\"x3\\": \\"float64\\"}, \\"schema_str\\": \\"gAN9cQAoWAIAAAB4MXEBWAcAAABmbG9hdDY0cQJYAgAAAHgycQNYBwAAAGZsb2F0NjRxBFgCAAAAeDNxBVgHAAAAZmxvYXQ2NHEGdS4=\\", \\"need_fit\\": true, \\"_fitted\\": true, \\"name\\": \\"datacanvas.api.dc_sklearn.features.Imputer\\", \\"serialize_path\\": \\"/mnt/aps/project/dad5607c-9de7-4396-a4ea-11bc0d7d304e/job/425acc09-a0c1-4903-8534-657b9ed3572b/9449a186-15e4-475e-b1ef-b68410d2e2ad_5612e705-4da6-4e81-b4af-58880d224544.pkl\\", \\"input_cols\\": [\\"x1\\", \\"x2\\", \\"x3\\"], \\"output_cols\\": [\\"x1\\", \\"x2\\", \\"x3\\"], \\"strategy\\": \\"mean\\", \\"constant\\": null, \\"impute_map\\": {\\"x1\\": 3.0540000000000007, \\"x2\\": 3.7586666666666693, \\"x3\\": 1.1986666666666672}, \\"inputCols\\": [\\"x1\\", \\"x2\\", \\"x3\\"], \\"outputCols\\": [\\"x1\\", \\"x2\\", \\"x3\\"]}","pipelineType":"sklearn_dc","pipelineIndex":null,"orderId":0}]},{"modelId":null,"name":"随机采样","description":"Empty","orderId":2,"stepTransformer":[]},{"modelId":null,"name":"归一化","description":"Empty","orderId":3,"stepTransformer":[{"stepId":"fe0716ea-31ac-4066-9ad1-5a3db0d23965","name":"sklearn_pandas.dataframe_mapper.DataFrameMapper","features":{"x1":"float64","x2":"float64","x3":"float64"},"transformer":"{\\"features\\": [[[\\"x1\\"], {\\"feature_range\\": [0, 1], \\"copy\\": true, \\"n_samples_seen_\\": 150, \\"scale_\\": \\"[0.41666667]\\", \\"min_\\": \\"[-0.83333333]\\", \\"data_min_\\": \\"[2.]\\", \\"data_max_\\": \\"[4.4]\\", \\"data_range_\\": \\"[2.4]\\"}], [[\\"x2\\"], {\\"feature_range\\": [0, 1], \\"copy\\": true, \\"n_samples_seen_\\": 150, \\"scale_\\": \\"[0.16949153]\\", \\"min_\\": \\"[-0.16949153]\\", \\"data_min_\\": \\"[1.]\\", \\"data_max_\\": \\"[6.9]\\", \\"data_range_\\": \\"[5.9]\\"}], [[\\"x3\\"], {\\"feature_range\\": [0, 1], \\"copy\\": true, \\"n_samples_seen_\\": 150, \\"scale_\\": \\"[0.41666667]\\", \\"min_\\": \\"[-0.04166667]\\", \\"data_min_\\": \\"[0.1]\\", \\"data_max_\\": \\"[2.5]\\", \\"data_range_\\": \\"[2.4]\\"}]], \\"built_features\\": [[[\\"x1\\"], {\\"feature_range\\": [0, 1], \\"copy\\": true, \\"n_samples_seen_\\": 150, \\"scale_\\": \\"[0.41666667]\\", \\"min_\\": \\"[-0.83333333]\\", \\"data_min_\\": \\"[2.]\\", \\"data_max_\\": \\"[4.4]\\", \\"data_range_\\": \\"[2.4]\\"}, {}], [[\\"x2\\"], {\\"feature_range\\": [0, 1], \\"copy\\": true, \\"n_samples_seen_\\": 150, \\"scale_\\": \\"[0.16949153]\\", \\"min_\\": \\"[-0.16949153]\\", \\"data_min_\\": \\"[1.]\\", \\"data_max_\\": \\"[6.9]\\", \\"data_range_\\": \\"[5.9]\\"}, {}], [[\\"x3\\"], {\\"feature_range\\": [0, 1], \\"copy\\": true, \\"n_samples_seen_\\": 150, \\"scale_\\": \\"[0.41666667]\\", \\"min_\\": \\"[-0.04166667]\\", \\"data_min_\\": \\"[0.1]\\", \\"data_max_\\": \\"[2.5]\\", \\"data_range_\\": \\"[2.4]\\"}, {}]], \\"default\\": null, \\"built_default\\": null, \\"sparse\\": false, \\"df_out\\": true, \\"input_df\\": false, \\"transformed_names_\\": [\\"x1\\", \\"x2\\", \\"x3\\"], \\"transformers\\": [{\\"name\\": \\"sklearn.preprocessing.data.MinMaxScaler\\", \\"features\\": [\\"x1\\"]}, {\\"name\\": \\"sklearn.preprocessing.data.MinMaxScaler\\", \\"features\\": [\\"x2\\"]}, {\\"name\\": \\"sklearn.preprocessing.data.MinMaxScaler\\", \\"features\\": [\\"x3\\"]}], \\"name\\": \\"sklearn_pandas.dataframe_mapper.DataFrameMapper\\"}","pipelineType":"sklearn","pipelineIndex":null,"orderId":0}]},{"modelId":null,"name":"数据集拆分","description":"Empty","orderId":4,"stepTransformer":[]},{"modelId":null,"name":"XGBoost","description":"Empty","orderId":5,"stepTransformer":[{"stepId":"524a9e16-f8db-452a-ac23-c0dd31711424","name":"xgboost.sklearn.XGBClassifier","features":{"x0":"float64","x1":"float64","x2":"float64","x3":"float64"},"transformer":"{\\"max_depth\\": 6, \\"learning_rate\\": 0.1, \\"n_estimators\\": 10, \\"silent\\": true, \\"objective\\": \\"multi:softprob\\", \\"booster\\": \\"gbtree\\", \\"gamma\\": 0, \\"min_child_weight\\": 1, \\"max_delta_step\\": 0, \\"subsample\\": 1, \\"colsample_bytree\\": 1, \\"colsample_bylevel\\": 1, \\"reg_alpha\\": 0, \\"reg_lambda\\": 1, \\"scale_pos_weight\\": 1, \\"base_score\\": 0.5, \\"missing\\": 0, \\"kwargs\\": {}, \\"_Booster\\": {\\"feature_names\\": [\\"x1\\", \\"x2\\", \\"x3\\", \\"x0\\"], \\"feature_types\\": [\\"float\\", \\"float\\", \\"float\\", \\"float\\"], \\"handle\\": {}, \\"best_iteration\\": 9, \\"best_ntree_limit\\": 10}, \\"seed\\": null, \\"random_state\\": 0, \\"nthread\\": null, \\"n_jobs\\": -1, \\"classes_\\": \\"[\'Iris-setosa\' \'Iris-versicolor\' \'Iris-virginica\']\\", \\"n_classes_\\": 3, \\"_le\\": {\\"classes_\\": \\"[\'Iris-setosa\' \'Iris-versicolor\' \'Iris-virginica\']\\"}, \\"_features_count\\": 4, \\"name\\": \\"xgboost.sklearn.XGBClassifier\\"}","pipelineType":"sklearn","pipelineIndex":null,"orderId":0}]},{"modelId":null,"name":"生成Pipeline_XGBoost","description":"Empty","orderId":6,"stepTransformer":[]}]';
      return <PipeLine data={JSON.parse(pipeline)} />
    }}
  </State>
</Playground>

## BarChart1
<Playground>
 <State>
   {({ state, setState }) => {
    const { Chart } = Components;
    const { BarChart1 } = Chart;
    return <BarChart1 data={data.plotChartData} />
  }}
  </State>
</Playground>

## SliderChart
<Playground>
 <State>
   {({ state, setState }) => {
    const { Chart } = Components;
    const { SliderChart } = Chart;
    const Threshold = '阈值计算';
    const IsolatedForests = '孤立森林';
    const IFException = '孤立森林异常点';
    const THException = '阈值计算异常点';
    const legendExtend = (modelTypes) => (_, legendTitles = []) => {
          const titles = [...legendTitles];
          if (modelTypes.indexOf(Threshold) !== -1 && !titles.find(item => item.alias === THException)) {
            titles.push({ alias: THException, color: 'red' });
          }
          if (modelTypes.indexOf(IsolatedForests) !== -1 && !titles.find(item => item.alias === IFException)) {
            titles.push({ alias: IFException, color: 'purple' });
          }
          return titles;
        };
    const isolatedForestsScales = (y = 'y', alias) => {
        return {
          scales: {
            axisX: { key: 'x', mask: 'HH:mm:ss' },
            axisY: [
              { key: y,
                alias,
                color: ['y*prediction', (val1, val2) => { return thresholdColor(`0_${val2}`); }],
                shape: 'circle',
                type: 'point' },
            ],
          },
        };
      };
     const thresholdColor = (() => {
        const obj = { 0: 'green', 1: 'red', '0_0': 'green', '0_1': 'purple', '1_0': 'red', '1_1': 'red' };
        return (key) => {
          return obj[key] || 'transparent';
        };
      })();
    return <SliderChart
             data={JSON.parse(data.sliderData)}
             height={360}
             scales={isolatedForestsScales('y', 'aaa').scales}
             options={{
               legendExtend: legendExtend(IsolatedForests),
             }}
           />
  }}
  </State>
</Playground>

## Report
<Playground>
  <State>
  {({}) => {
    const { ModelDetails } = AutoML;
    const { Report } = ModelDetails;
    return <Report data={JSON.parse(data.modelPerformance)} />
  }}
  </State>
</Playground>

## Rect5
<Playground>
  <State>
  {({}) => {
    const { Chart } = Components;
    const { Rect5 } = Chart;
    return <Rect5 data={data.featureImportance} windowStatus={'normal'} />
  }}
  </State>
</Playground>

## Matrix
<Playground>
  <State>
  {({}) => {
    const { ModelDetails } = AutoML;
    const { Matrix } = ModelDetails;
    const modelPerformance = JSON.parse(data.modelPerformance);
    return <Matrix matrixdata={modelPerformance.confusion_matrix} />
  }}
  </State>
</Playground>

## CompareCharts
<Playground>
  <State>
  {({}) => {
    const { ModelDetails } = AutoML;
    const { CompareCharts } = ModelDetails;
    return <CompareCharts
             windowStatus={'normal'}
             compareCharts={JSON.parse(data.compareCharts)}
             compareChartsType={JSON.parse(data.compareChartsType)}
             compareChartsModels={JSON.parse(data.compareChartsModels)}
             compareChartsModels1={JSON.parse(data.compareChartsModels1)}
             currentJob={data.currentJob}
           />
  }}
  </State>
</Playground>

## CompareTable
<Playground>
  <State>
  {({}) => {
    const { ModelDetails } = AutoML;
    const { CompareTable } = ModelDetails;
    return <CompareTable dataCompare={JSON.parse(data.dataCompare)} currentJob={data.currentJob} />
  }}
  </State>
</Playground>

## List
<Playground>
  <State>
  {({}) => {
    const { ModelDetails } = AutoML;
    const { List } = ModelDetails;
    const list = [{name:'算法'}, {name:'reg', value: 1}, {name:'reg', value: 1}, {name:'reg', value: 1}];
    return <List data={list} />
  }}
  </State>
</Playground>

## Attachments
<Playground>
  <State>
  {({}) => {
    const { ModelDetails } = AutoML;
    const { Attachments } = ModelDetails;
    const attachments = [{id: '123', name:'附件', filePath: 'b5ff903_model'}, {id: '123', name:'附件1', filePath: 'b5ff903_model'}];
    return <Attachments data={attachments} />
  }}
  </State>
</Playground>

### API

### ModelDetail

<PropsTable of={ ModelDetail } />


